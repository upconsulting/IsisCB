{% extends "isisdata/__base.html" %}
{% load app_filters %}
{% load citation_filters %}
{% load static %}
{% load metadata_filters %}
{% load search_filters %}

{% block extra_head %}
    <style>
        .playlist-description {
            overflow: hidden;
            text-overflow: ellipsis;
            display: -webkit-box;
            -webkit-line-clamp: 2; /* number of lines to show */
                    line-clamp: 2; 
            -webkit-box-orient: vertical;
        }
    </style>
{% endblock %}

{% block content %}
    <div class="col-sm-12" style="padding: 0 15%;">
        <div class="col-sm-12">
            <h3>user: <a href="{% url 'user_profile' username %}">{{username}}</a></h3>
            <div class="col-sm-8">
                <h2>Playlists</h2>
            </div>
            <div class="col-sm-4">
                <a href="{% url 'create_playlist' %}" class="btn btn-primary btn-sm pull-right" style="margin-top: 20px;"><i class="fas fa-plus"></i> Create New Playlist</a>
            </div>
        </div>
        {% for collection in collections %}
            <div class="col-sm-3">
                <div class="thumbnail" style="width: auto;">
                    <img src="{% if collection.coverimage_url %}{{collection.coverimage_url}}{% else %}https://upload.wikimedia.org/wikipedia/commons/b/b8/Museum_Wormiani_Historia_1655_Wellcome_L0000128.jpg{% endif %}" alt="{{collection.name}} citation collection cover image" style="object-fit: cover; width: 100%;height: 100%;">
                    <div class="caption" style="text-overflow: ellipsis; overflow: hidden;">
                        <a href="{% url 'playlist' collection.id %}"><h4 style="margin: 5px 0; overflow-wrap: break-word;">{{collection.name}}</h4></a>
                        <span class="playlist-description">{{collection.description}}</span><br/>
                        <span style="color: #777">{{collection.citations.all.count}} citation(s)</span>
                        <p style="color: #777">created: {{collection.created|date:"Y-m-d"}}</p>
                    </div>
                </div>
            </div>
        {% empty%}
            <h5>You don't have any collections yet . . .</h5>
        {% endfor %}
    </div>
{% endblock %}